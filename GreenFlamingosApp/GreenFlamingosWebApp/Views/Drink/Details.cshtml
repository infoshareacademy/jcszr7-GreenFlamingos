@model GreenFlamingos.Model.Drinks.Drink
@{
    Layout = "~/Views/Shared/_LayoutOLD.cshtml";
    ViewData["Title"] = "Recipe";
    var preparationSteps = Model.Preparation.Split("\r\n").ToList();
    var userName = User.Identity.Name;
}
<script src="https://kit.fontawesome.com/71a3607229.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="~/js/GreenFlamingosScripts.js"></script>
<div>
    <!-- ##### Breadcumb Area Start ##### -->
    <div class="Kuba_Test2">
        <img src="@Model.ImageUrl" class="center" />
    </div>
    <div class="receipe-content-area">
        <div class="container">

            <div class="row">
                <div class="col-12 col-md-8">
                    <div class="receipe-headline my-5">
                        <h2>@Model.Name</h2>
                        <div class="receipe-duration">
                            @Model.Description
                        </div>
                    </div>
                </div>
                <div class="Information">
                    <div class="additionalInfo">
                        <h6 style="color:black;">Alcohol</h6>
                        <h6 style="color:black;">@Model.AlcoholContent %</h6>
                    </div>
                    <div style="color:black;" class="additionalInfo">
                        <h6 style="color:black;">Calories</h6>
                        <h6 style="color:black;">@Model.Calories</h6>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-12 col-lg-8">
                    <h4 style="color:#474747; margin-bottom:30px;">Preparation:</h4>

                    @foreach (var preparation in preparationSteps)
                    {
                        <!-- Single Preparation Step -->
                        <div class="single-preparation-step d-flex">
                            <h4>@(preparationSteps.IndexOf(preparation) + 1).</h4>
                            <h5>@preparation</h5>
                        </div>
                    }
                </div>

                <!-- Ingredients -->
                <div>
                    <div class="ingredients">
                        <h4>Składniki</h4>

                        @foreach (var ingredient in Model.Ingredients)
                        {
                            <!-- Custom Checkbox -->
                            <div class="ingredient">
                                <input type="checkbox" style="width:25px; height:25px; margin-bottom:20px; margin-right:20px;" id="cb1">
                                <label class="custom-control-label" for="customCheck1">@ingredient.Name : @ingredient.Capacity</label>
                            </div>
                        }
                    </div>
                </div>
            </div>
            @if (userName != null)
            {
                <form id="Rating" method="post" style="text-align:center;" asp-action="AddRating" asp-controller="Drink">
                    <h2 style="margin-right:25px;">Rate the recipe</h2>
                    <div class="text-warning" onmouseout="CRateSelected()">
                        <span id="span1" onmouseout="CRateOut(1)" onmouseover="CRateOver(1)" onclick="CRateClick(1)" class="glyphicon glyphicon-star-empty" style="margin-right:30px;"></span>
                        <span id="span2" onmouseout="CRateOut(2)" onmouseover="CRateOver(2)" onclick="CRateClick(2)" class="glyphicon glyphicon-star-empty" style="margin-right:30px;"></span>
                        <span id="span3" onmouseout="CRateOut(3)" onmouseover="CRateOver(3)" onclick="CRateClick(3)" class="glyphicon glyphicon-star-empty" style="margin-right:30px;"></span>
                        <span id="span4" onmouseout="CRateOut(4)" onmouseover="CRateOver(4)" onclick="CRateClick(4)" class="glyphicon glyphicon-star-empty" style="margin-right:30px;"></span>
                        <span id="span5" onmouseout="CRateOut(5)" onmouseover="CRateOver(5)" onclick="CRateClick(5)" class="glyphicon glyphicon-star-empty" style="margin-right:30px;"></span>
                    </div>
                    <div>
                        <input type="hidden" id="lblRating" name="rating" value="0" />
                    </div>
                    <div>
                        <input type="hidden" name="rating" value="@Model.Id" />
                    </div>
                </form>
            }
        </div>
        @if (userName != null)
        {
            <div class="Kuba_Test">
                @Html.ActionLink("Add to favourites", "AddDrinkToFavourites", new { drinkId=Model.Id },new{@class="btn btn-lg btn-success"})
            </div>
        }
    </div>
</div>
<div>
    <!-- Comments -->
    <!--ADD COMMENT-->
    @if (userName != null)
    {
        <form method="post" asp-action="AddComment" asp-controller="Drink">
            <div class="form-group">
                <label for="comment">Your comment:</label>
                <textarea class="form-control" name="comment" rows="3"></textarea>
            </div>
            <input type="hidden" name="drinkId" value="@Model.Id" />
            <button type="submit" class="btn btn-success">Add comment</button>
        </form>
    }
    else
    {
        <h2>Login to leave a comment</h2>
    }

    <!--SHOW COMMENT-->
    <hr>
    <h2>Comments</h2>

    @foreach (var comment in Model.Comments)
    {
        <div class="comment">
            <label class="custom-control-label" for="customCheck1">
                @comment.Key:
                <span class="text-muted"> @comment.Value</span>
                <hr style="margin-top:10px;">
            </label>
        </div>
    }

    @foreach (var comment in Model.Comments)
    {
        <div class="media">
            <div class="media-body">
                <h4 class="media-heading">@comment.Key</h4>
                <p>@comment.Value</p>
                <ul class="list-unstyled list-inline media-detail pull-left">
                    <li><i class="fa fa-calendar"></i> 27/02/2014</li>
                    <li><i class="fa fa-thumbs-up"></i>13</li>
                </ul>
                <ul class="list-unstyled list-inline media-detail">
                    <li class=""><a href="">Like</a></li>
                    <li class=""><a href="">Reply</a></li>
                </ul>
            </div>
        </div>
    }
</div>
